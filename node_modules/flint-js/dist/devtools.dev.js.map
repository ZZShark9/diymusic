{"version":3,"sources":["webpack:///./src/tools/main.js","webpack:///./src/tools/errors.js","webpack:///./src/tools/messages.js","webpack:///./src/lib/flintExt.js","webpack:///./src/tools/socket.js"],"names":[],"mappings":"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","file":"devtools.dev.js","sourcesContent":["import errors from './errors'\nimport messages from './messages'\nimport ee from 'event-emitter'\n\nconst emitter = ee({})\n\nwindow._DT = {\n  emitter,\n  data: null, // should be error\n  on(name, cb) { emitter.on(name, cb) }\n}\n\nconst opts = {\n  websocketPort: window._FLINT_WEBSOCKET_PORT\n}\n\nerrors(window._DT, opts)\nmessages(window._DT, opts)\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/main.js\n **/","let browser;\n\nconst browserData = data => {\n  browser.data = data;\n}\n\n// this is for using in runview\nfunction flintRuntimeError(message, file, line, col, error) {\n  browserData({ message, file, line, col, stack: error && error.stack });\n  // console.log('got err', message, file, line, col, error)\n  browser.emitter.emit('runtime:error')\n}\n\nwindow.flintRuntimeError = flintRuntimeError\n\nexport default function run(b, opts) {\n  browser = b;\n\n  window.onViewLoaded = () =>\n    browserData('success', null);\n}\n\nexport function compileError(error) {\n  if (error.loc) {\n    const { message, fileName, loc, stack } = error;\n    browserData({ message, stack, file: fileName, line: loc.line, col: loc.column });\n  }\n  else if (error.lineNumber) {\n    const { message, stack, fileName, lineNumber, column } = error;\n    browserData({ message, stack, file: fileName, line: lineNumber, col: column });\n  }\n}\n\nexport function compileSuccess() {\n  browserData(null);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/errors.js\n **/","import { compileError, compileSuccess } from './errors';\nimport removeFlintExt from '../lib/flintExt';\nimport socket from './socket'\n\nexport default function run(browser, opts) {\n  socket(browser, opts, {\n    'editor:location': msg => {\n      browser.editorLocation = msg\n    },\n\n    'view:locations': msg => {\n      browser.viewLocations = msg\n    },\n\n    'script:add': msg => {\n      replaceScript(msg)\n    },\n\n    'stylesheet:add': msg => {\n      addSheet(msg.view)\n    },\n\n    'stylesheet:remove': msg => {\n      removeSheet(msg.view)\n    },\n\n    'compile:error': msg => {\n      compileError(msg.error)\n    },\n\n    'compile:success': msg => {\n      compileSuccess()\n    },\n\n    'packages:reload': reloadScript('__flintExternals'),\n    'internals:reload': reloadScript('__flintInternals', { reloadAll: true }),\n\n    'file:delete': ({ name }) => {\n      let views = Flint.getFile(name)\n      views.map(removeSheet)\n      removeScript(name)\n\n      Flint.deleteFile(name)\n    },\n\n    'flint:opts': opts => {\n      window.__flintopts = opts\n    },\n\n\n    // coming from editor to browser\n\n    fromEditor: ({ key, val }) => {\n      browser.editor = browser.editor || {}\n      browser.editor[key] = val\n      browser.emitter.emit('editor:state')\n    }\n  })\n}\n\n// tag loader is a throttler\n// it accepts requests to load tags\n// and once those tags load, it will continue\n\nfunction TagLoader() {\n  let last = {}\n  let loading = {}\n  let wait = {}\n\n  return function(name, load) {\n    let oldTag = last[name]\n\n    if (loading[name]) {\n      wait[name] = true\n      return\n    }\n\n    loading[name] = true\n\n    load(oldTag, onDone)\n\n    function onDone(newTag) {\n      last[name] = newTag\n      loading[name] = false\n\n      if (wait[name]) {\n        wait[name] = false\n        load(last[name], onDone)\n      }\n    }\n  }\n}\n\n/*\n\n  This should be a closed async loop for hot loading files.\n\n  ws:add => addScript => tagloader => replaceTag =>\n    replaceTag => (tagLoader|null)\n\n*/\n\nconst scriptSelector = src => `script[src^=\"${removeTime(removeBase(src))}\"]`\nconst scriptUrl = name => `/_/${name}.js`\nconst findScript = name => document.querySelector(scriptSelector(scriptUrl(name)))\n\nconst sheetSelector = href => `link[href^=\"${removeTime(removeBase(href))}\"]`\nconst sheetUrl = name => `/__/styles/${name}.css`\nconst findSheet = name => document.querySelector(sheetSelector(sheetUrl(name)))\n\nconst scrLoad = TagLoader()\nconst cssLoad = TagLoader()\n\nfunction addScript(src) {\n  let path = src.replace('/_/', '')\n  socket.send('script:load', { path })\n  scrLoad(src, (lastTag, done) => {\n    lastTag = lastTag || document.querySelector(scriptSelector(src))\n\n    if (!lastTag)\n      replaceTag(createScript(src), 'src', finish)\n    else\n      replaceTag(lastTag, 'src', finish)\n\n    function finish() {\n      socket.send('script:done', { path })\n      done()\n    }\n  })\n}\n\nfunction addSheet(name) {\n  cssLoad(name, (lastTag, done) => {\n    lastTag = lastTag || findSheet(name)\n\n    if (!lastTag)\n      replaceTag(createSheet(sheetUrl(name)), 'href', done)\n    else\n      replaceTag(lastTag, 'href', done)\n  })\n}\n\nfunction getParent(tag) {\n  if (tag.parentNode) return tag.parentNode\n  if (tag.nodeName == 'SCRIPT') return document.body\n  else return document.head\n}\n\nfunction replaceTag(tag, attr, after) {\n  if (!tag) return\n\n  let parent = getParent(tag)\n  let clone = cloneNode(tag, attr)\n  let already = false\n  let cielTimeout\n\n  const afterFinish = () => {\n    if (already) return\n    clearTimeout(cielTimeout)\n    already = true\n    setTimeout(() => {\n      removeTag(tag, parent, () => {\n        after && after(clone)\n      })\n    }, 4)\n  }\n\n  clone.onerror = afterFinish\n  clone.onload = afterFinish\n  parent.appendChild(clone)\n\n  // ceil of 250ms for slow loads\n  cielTimeout = setTimeout(() => {\n    if (already) return\n    removeTag(tag, tag.parentNode, afterFinish, { leftover: 1 })\n  }, 200)\n}\n\nfunction removeTag(tag, parent, cb, opts = {}) {\n  let { leftover } = opts\n  leftover = typeof leftover == 'number' ? leftover : 2 // how many tags to leave\n\n  try {\n    parent.removeChild(tag)\n    setTimeout(cb, 2)\n  }\n  catch(e) {\n    const isScript = tag.nodeName == 'SCRIPT'\n    let tags = document.querySelectorAll(isScript ? scriptSelector(tag.src) : sheetSelector(tag.href))\n\n    // attempt force removal\n    for (let i = 0; i < tags.length - leftover; i++) {\n      const tag = tags[i]\n      try {\n        tag.parentNode.removeChild(tag)\n      }\n      catch(e) {\n        try {\n          document.body.removeChild(tag)\n          document.head.removeChild(tag)\n        }\n        catch(e) { /* oh well */ }\n      }\n    }\n\n    // wait a bit longer after recovery\n    setTimeout(cb, 30)\n  }\n}\n\nfunction reloadScript(id, opts = {}) {\n  return () => {\n    const el = document.getElementById(id)\n    if (!el) return\n\n    const finish = opts.reloadAll ? reloadAllScripts : renderFlint\n    const tag = replaceTag(el, 'src', finish)\n  }\n}\n\nfunction replaceScript({ name, timestamp, src }, cb) {\n  const jsName = removeFlintExt(name)\n  addScript(src || `/_${jsName}`)\n}\n\nfunction reloadAllScripts() {\n  const scripts = document.querySelectorAll('.__flintScript')\n\n  if (!scripts.length)\n    return\n\n  let total = scripts.length\n\n  _Flint.resetViewState()\n\n  ;[].forEach.call(scripts, script => {\n    replaceTag(script, 'src')\n  })\n\n  // TODO: this should wait for all tags to be done loading\n  setTimeout(Flint.render, 10)\n}\n\nlet renderAttempts = 0\n\nfunction renderFlint() {\n  if (renderAttempts > 10) {\n    renderAttempts = 0\n    return\n  }\n\n  if (typeof Flint != 'undefined') {\n    setTimeout(Flint.render)\n    renderAttempts = 0\n  }\n  else {\n    renderAttempts++\n    setTimeout(renderFlint, 50)\n  }\n}\n\nfunction removeBase(str) {\n  return str.replace(/^http\\:\\/\\/[^/]+/, '')\n}\n\nfunction removeTime(str) {\n  return str.replace(/\\?[0-9]+$/, '')\n}\n\nfunction replaceTime(str) {\n  return removeTime(str) + `?${Date.now()}`\n}\n\nfunction createScript(src) {\n  let tag = document.createElement('script')\n  tag.src = src\n  return tag\n}\n\nfunction createSheet(href) {\n  let tag = document.createElement('link')\n  tag.href = href\n  tag.rel = \"stylesheet\"\n  return tag\n}\n\nfunction cloneNode(node, attr) {\n  let clone\n\n  if (node.tagName != 'SCRIPT') {\n    clone = node.cloneNode(false)\n  }\n  else {\n    clone = document.createElement('script')\n\n    const attrs = node.attributes\n    for (let i = 0; i < attrs.length; i++)\n       if (attrs[i].name != 'src')\n         clone.setAttribute(attrs[i].name, attrs[i].value)\n  }\n\n  clone.setAttribute(attr, replaceTime(node.getAttribute(attr)))\n\n  return clone\n}\n\nfunction removeSheet(name) {\n  let tag = findSheet(name)\n  if (tag && tag.parentNode)\n    tag.parentNode.removeChild(tag)\n}\n\nfunction removeScript(name) {\n  let tag = findScript(name.replace('.js', ''))\n  if (tag && tag.parentNode)\n    tag.parentNode.removeChild(tag)\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/messages.js\n **/","// normalized flint extension, turning jsf -> js\nexport default function(file) {\n  if (!file) return ''\n  let dots = file.split('.')\n  if (dots[dots.length - 1] === 'jsf') dots[dots.length - 1] = 'js'\n  return dots.join('.')\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/flintExt.js\n **/","let opts\nlet browser\nlet actions\n\nlet isOpening = false\nlet isOpen = false\nlet ws = null\n\nexport default function socket(_browser, _opts, _actions) {\n  opts = _opts\n  browser = _browser\n  actions = _actions\n  open()\n\n  browser.messageEditor = obj => {\n    socket.send('editor', obj)\n  }\n}\n\nsocket.send = function send(type, obj) {\n  obj = obj || {}\n  obj._type = type\n  ws.send(JSON.stringify(obj))\n}\n\nfunction open() {\n  console.flint('socket', 'open', 'isOpening', isOpening)\n  if (isOpening) return\n  isOpening = true\n\n  ws = new WebSocket('ws://localhost:' + opts.websocketPort + '/')\n  ws.onopen = onOpen\n  ws.onmessage = onMessage\n  ws.onerror = reconnect\n  ws.onclose = reconnect\n}\n\nfunction onOpen() {\n  isOpen = true\n  isOpening = false\n  reconnecting = false\n}\n\nfunction onMessage(message) {\n  message = JSON.parse(message.data)\n  if (!message) return\n  console.flint('socket', 'onMessage', 'message', message._type, message)\n\n  const action = actions[message._type]\n  if (action) action(message)\n\n  browser.data = message\n  browser.emitter.emit(message._type)\n}\n\nlet tries\nlet reconnecting = false\n\nfunction reconnect() {\n  isOpening = false\n  isOpen = false\n\n  if (ws) ws.close()\n  if (reconnecting) return\n  reconnecting = true\n  tries = 0\n  reconnector()\n}\n\nfunction reconnector() {\n  if (isOpen || tries > 50) return\n\n  open()\n\n  // delay more and more in between\n  tries++\n  let delay = tries * 1000\n  setTimeout(reconnector, delay)\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools/socket.js\n **/"],"sourceRoot":""}